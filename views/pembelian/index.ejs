<%- include('../layout', { title: "Pembelian" }) %>

<div class="d-flex justify-content-between mb-3">
  <h4>List Pembelian</h4>
  <a href="/pembelian/create" class="btn btn-primary">+ Tambah Pembelian</a>
</div>

<table class="table table-bordered table-striped">
  <thead>
    <tr>
      <th>#</th>
      <th>Produk</th>
      <th>Jumlah</th>
      <th>Total Harga</th>
      <th>Status</th>
      <th>Aksi</th>
    </tr>
  </thead>
  <tbody>
    <% pembelian.forEach((p, i) => { %>
    <tr>
      <td><%= i+1 %></td>
      <td><%= p.nama_produk %></td>
      <td><%= p.qty %></td>
      <td>Rp <%= p.total %></td>
      <td>
        <% if (p.status === "cancel") { %>
        <span class="badge bg-danger">Canceled</span>
        <% } else { %>
        <span class="badge bg-success">Success</span>
        <% } %>
      </td>
      <td>
        <% if (p.status === "success") { %>
        <a href="/pembelian/cancel/<%= p.id %>" class="btn btn-danger btn-sm"
          >Cancel</a
        >
        <% } %>
      </td>
    </tr>
    <% }) %>
  </tbody>
</table>
